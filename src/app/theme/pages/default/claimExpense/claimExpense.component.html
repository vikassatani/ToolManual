<style>
thead>tr>th {
    cursor: pointer;
}
.right {
    float: right;
}
</style>
<div class="m-content">
    
        <div class="m-portlet">
            <div class="m-portlet__head">
                <div class="m-portlet__head-caption">
                    <div class="m-portlet__head-title">
                        <span class="m-portlet__head-icon m--hide">
                                    <i class="la la-gear"></i>
                                </span>
                        <h3 class="m-portlet__head-text">
                          Create Claim Expense
                        </h3>
                    </div>
                </div>
            </div>
            <!--begin::Form-->
            <form #f="ngForm" class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed">
                <div class="m-portlet__body">
                    <div class="form-group m-form__group row">
                                       
                        <div class="col-lg-4">
                            <label>
                           Enter Expense Title:
                                    </label>
                         <div class="m-input-icon m-input-icon--right">
                            <input type="text" class="form-control m-input m-input--air" placeholder="Title" [(ngModel)]="addExpense.name"  (keypress)="omit_special_char($event)"  id="name"  required   name="name"  #name="ngModel" maxlength="100">
                             <span class="m-input-icon__icon m-input-icon__icon--right">
                                <span>
                                    <i class="fal fa-plane"></i>
                                </span>
                                
                    </span>
                    </div>
                    <span class="m-form__help" *ngIf="!name.valid && name.touched" style="color:red">
                        Please enter valid Data
                   
                   </span>
                        </div>
                        <div class="col-lg-4">
                            <label></label>
                                <div class="m-input-icon m-input-icon--right">
                                        <button (click)="onSubmit()"  [disabled]="!f.valid" class="btn btn-primary">
                                                Submit
                                            </button>
                                         <span class="m-input-icon__icon m-input-icon__icon--right">
                                           
                                            
                                </span>
                                </div>
                               
                        </div>
                        


                    </div>
                   
                </div>
               
            </form>

            <div class="m-portlet__body">
            <div class="m-form m-form--label-align-right m--margin-top-20 m--margin-bottom-30">
              <div class="row align-items-center">
                 <div class="col-xl-8 order-2 order-xl-1">
                    <div class="form-group m-form__group row align-items-center">  
                            <div class="col-md-5">
                                    <div class="m-form__group m-form__group--inline">
                                       
                                        <div class="m-form__label">
                                            <label>Status:</label>   
                                        </div>
                                        <div class="m-form__control">
                                           
                                            <!-- <select class="form-control" [(ngModel)]="expense.status"  [ngModelOptions]="{standalone:true}" (ngModelChange)="onStatusChange(expense.status)"> -->
                                               
                                                <select class="form-control" [(ngModel)]="Expstatus" [ngModelOptions]="{standalone:true}"
                                                (ngModelChange)="onStatusChange(Expstatus)">
                                                    <option value="-1">All</option>
                                                    <option *ngFor="let s of expenseStatus"  [ngValue]="s.id">{{s.Name}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="d-md-none m--margin-bottom-10"></div>
                                </div>
                                <div class="col-md-4">
                                    <div class="m-input-icon m-input-icon--left">
                                        <input type="text" class="form-control m-input m-input--solid" [(ngModel)]="filter" [ngModelOptions]="{standalone: true}" placeholder="Search..." id="generalSearch">
                                        <span class="m-input-icon__icon m-input-icon__icon--left">
                                            <span>
                                                <i class="la la-search"></i>
                                            </span>
                                        </span>
                                    </div>
                                </div>
                    </div>
                </div>
            </div>
          </div>
            <div class="m-separator m-separator--dashed d-xl-none"></div>
            <div class="m-content">
                <div class="m-portlet m-portlet--mobile">
              <div class="expenseData" id="local_data">
                  
                      <table class="table table-condensed table-striped table-bordered table-responsive" >
                                <thead class="thead-default"> 
                                  <tr class="sortable">  
                                    <th><B>#</B></th>
                                    <!-- <th (click)="sort('staff_No')"><B>Staff No</B>
                                        <span class="glyphicon sort-icon" *ngIf="key == 'staff_No'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
                                    <th (click)="sort('staff_Name')"><B>Staff Name</B>
                                        <span class="glyphicon sort-icon" *ngIf="key == 'staff_Name'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th> -->
                                    <th (click)="sort('name')"><B>Expense Title</B>
                                         <span class="glyphicon sort-icon" *ngIf="key == 'name'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>   
                                    <th (click)="sort('total_Amount')"><B>Total Amount</B>
                                        <span class="glyphicon sort-icon" *ngIf="key == 'total_Amount'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th (click)="sort('submitted_Date')"><B>Submitted Date</B>
                                        <span class="glyphicon sort-icon" *ngIf="key == 'submitted_Date'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span></th>
                                    <th (click)="sort('staff_remarks')"><B>Remarks</B>
                                        <span class="glyphicon sort-icon" *ngIf="key == 'staff_remarks'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th (click)="sort('approver_remarks')"><B>Manager Remarks</B>
                                        <span class="glyphicon sort-icon" *ngIf="key == 'approver_remarks'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>
                                    <th (click)="sort('status')"><B>Status</B>
                                        <span class="glyphicon sort-icon" *ngIf="key == 'status'" [ngClass]="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                                    </th>   
                                    <th><B>Action</B></th>   
                                </tr>
                                </thead>  
                                <tbody>  
                                <tr *ngFor="let details of expense | orderBy: key : reverse | filter:filter | paginate: { itemsPerPage: itemsPerPage, currentPage: p }; let i=index" (dblclick)="redirectToAddPage(details.expense_id,details.status)">
                                        <td>
                                            <input type="hidden" [(ngModel)]="details.expense_id" [ngModelOptions]="{standalone:true}">
                                            {{ i+1 }}</td>
                                            <!-- <td> {{ details.staff_No}}</td>
                                            <td> {{ details.staff_Name}}</td> -->
                                        <td> <input type="hidden" [(ngModel)]="details.name" [ngModelOptions]="{standalone:true}">
                                            {{ details.name}}</td> 
                                        <td>{{ details.total_Amount}}</td> 
                                        <td> {{ details.submitted_Date|date: 'dd/MM/yyyy'}}</td>
                                        <td>{{ details.staff_remarks}}</td> 
                                        <td>{{ details.approver_remarks}}</td> 
                                        <td *ngIf="details.status==0">
                            
                                                <button type="button" class="btn m-btn--pill m-btn--air btn-focus" >&nbsp;&nbsp;&nbsp;Expense Created&nbsp;&nbsp;&nbsp;</button>
                                            </td>
                                        <td *ngIf="details.status==1">
                            
                                            <button type="button"   class="btn btn-outline-warning disable" >Waiting For Approval</button>
                                        </td>
                                        <td *ngIf="details.status==2"> 
                                       
                                            <button type="button" class="btn m-btn--pill m-btn--air  btn-success">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Approved&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
                                        </td>
                                        <td *ngIf="details.status==3"> 
                                          
                                            <button type="button" class="btn m-btn--pill m-btn--air  btn-brand">Needs Modification</button>
                                        </td>
                                        <td *ngIf="details.status==4"> 
                                               
                                                <button type="button"  class="btn m-btn--pill m-btn--air btn-danger">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rejected&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
                                            </td>       
                                        <td *ngIf="details.status==0 ||  details.status==3"  >
                                          
                                            <a href="" (click)="delete(details.expense_id)"  class="btn btn-danger m-btn m-btn--icon m-btn--icon-only">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                        </td>
                                       
                                    </tr>
                                
                                </tbody>  
                                </table >  
                                <br>
                                <div class="row">
                                    <label class="col-md-1" style="margin-top:5px">No.Of.Records</label>
                                    <div class="col-md-2" style="margin-bottom:20px">
                                        <input type="text" [(ngModel)]="rowsPerPage" [ngModelOptions]="{standalone: true}" 
                                        class="form-control m-input m-input--solid" placeholder="No.Of.Records" (ngModelChange)="setPageSize(rowsPerPage)"/>
                                    </div>
                                    <div class="col-md-9">
                                        <pagination-controls class="right" (pageChange)="p = $event"></pagination-controls>
                                    </div>
                                </div>                                  
                        </div>
              
              </div>
          </div>
          </div>
            <!--end::Form-->
        </div>
    </div>